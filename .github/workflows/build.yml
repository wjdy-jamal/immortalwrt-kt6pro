name: Build ImmortalWrt for KT-6 Pro

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-22.04
    timeout-minutes: 180
    
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3
      with:
        submodules: recursive
        
    - name: Setup Build Environment
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential ccache git python3
        echo "âœ… Ø§Ù„Ø¨ÙŠØ¦Ø© Ø¬Ø§Ù‡Ø²Ø©"
        
    - name: Clone ImmortalWrt
      run: |
        git clone --depth=1 https://github.com/immortalwrt/immortalwrt.git -b v23.05.3
        cd immortalwrt
        ./scripts/feeds update -a
        ./scripts/feeds install -a
        echo "âœ… ØªÙ… Ø§Ø³ØªÙ†Ø³Ø§Ø® ImmortalWrt"
        
    - name: Prepare Build
      run: |
        cd immortalwrt
        echo "CONFIG_TARGET_qualcommax=y" > .config
        echo "CONFIG_TARGET_qualcommax_ipq50xx=y" >> .config
        echo "âœ… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø¬Ø§Ù‡Ø²Ø©"
        
    - name: Build Status
      run: |
        echo "ðŸš€ Ø¨Ø¯Ø¡ Ø¨Ù†Ø§Ø¡ ImmortalWrt Ù„Ù€ KT-6 Pro"
        echo "ðŸ“… Ø§Ù„ÙˆÙ‚Øª: $(date)"
        echo "ðŸ’¾ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø­Ø±Ø©: $(df -h / | tail -1)"
